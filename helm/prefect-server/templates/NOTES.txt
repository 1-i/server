{{- if contains "LoadBalancer" .Values.ui.service.type }}
{{- $ui := include "prefect-server.nameField" (merge (dict "componentName" "ui") .) }}

- Run the following command to get the UI URL:

  UI_HOST=$( \
    kubectl get svc \
    --namespace {{ .Release.Namespace }} \
    --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}" \
    {{ $ui }} \
  ) \
  && echo "UI available at: http://$UI_HOST:{{ .Values.ui.service.port |  default .Values.ui.port }}"

  NOTE: It may take a few minutes for the LoadBalancer IP to be available. 
        You can watch the status of by running: kubectl get --namespace {{ .Release.Namespace }} svc -w {{ $ui }}

{{- else -}}

The UI has been deployed as a non-default service type '{{ .Values.ui.service.type }}' and may not be immediately accessible.
Please contact your Kubernetes administrator for help getting access.

{{- end }}

{{- if contains "LoadBalancer" .Values.apollo.service.type }}
{{- $apollo := include "prefect-server.nameField" (merge (dict "componentName" "apollo") .) }}

- Run the following command to get the Apollo GraphQL API URL:

  API_HOST=$( \
      kubectl get svc \
      --namespace {{ .Release.Namespace }} \
      --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}" \
      {{ $apollo }} \
    ) \
    && echo "API available at: http://$API_HOST:{{ .Values.apollo.service.port |  default .Values.apollo.port }}/graphql"

{{- else -}}

The API has been deployed as a non-default service type '{{ .Values.apollo.service.type }}' and may not be immediately accessible.
Please contact your Kubernetes administrator for help getting access.

{{- end }}

- The UI has been configured to point to '{{ .Values.ui.apolloApiUrl }}' by default. 
  - The API location you retrieved above should match this url. 
  - The default can be changed in the helm deployment at 'ui.apolloApiUrl' if it is incorrect. 
  - The location can also be changed within the UI itself.
  - The API must be accessible from the the user's machine for the UI to work
